surface.CreateFont("DungeonS",{font="Dungeon",size=16,weight=500})surface.CreateFont("Dungeon",{font="Dungeon",size=20,weight=500})surface.CreateFont("DungeonL",{font="Dungeon",size=24,weight=500})surface.CreateFont("Fairy",{font="FairyDustB",size=16,weight=500})surface.CreateFont("FairyL",{font="FairyDustB",size=24,weight=500})surface.CreateFont("FairyM",{font="FairyDustB",size=20,weight=500})surface.CreateFont("FairyXL",{font="FairyDustB",size=64,weight=700})surface.CreateFont("Renaissance",{font="PlainBlack",size=20,weight=500})surface.CreateFont("Knight",{font="BlackLetter",size=20,weight=500})surface.CreateFont("KnightM",{font="BlackLetter",size=24,weight=500})surface.CreateFont("KnightL",{font="BlackLetter",size=28,weight=500})surface.CreateFont("AdventureS",{font="BlackCastleMF",size=16,weight=500})surface.CreateFont("Adventure",{font="BlackCastleMF",size=20,weight=500})surface.CreateFont("AdventureM",{font="BlackCastleMF",size=24,weight=500})surface.CreateFont("Zenda",{font="Zenda",size=20,weight=500})surface.CreateFont("ZendaL",{font="Zenda",size=24,weight=500})surface.CreateFont("ZendaXL",{font="Zenda",size=64,weight=500})InAction = falsefunction HudData()local data = net.ReadTable()plydata = {}plydata = dataendnet.Receive("huddata",HudData)function GM:HUDShouldDraw( name )	if (name == "CHudHealth" or name == "CHudAmmo" or name == "CHudSecondaryAmmo" or name == "CHudZoom") then		return false	else		return true	end	endSBShow = falselocal act_time = 3local act_type = "Nothing"local act_bar = 0i = 0local acmap = game.GetMap()map = surface.GetTextureID("gui/" .. acmap)timer.Stop("Action")function GM:HUDPaint()if (input.IsKeyDown(KEY_M) and ChatBoxShow == false) thensurface.SetTexture( map )surface.DrawTexturedRect(ScrW()/8,ScrH()/8,ScrW()/8*6,ScrH()/8*6)endlocal client = LocalPlayer()local hp = LocalPlayer():Health()local self = client--Action Barif (act_bar > 0) then	surface.SetDrawColor(157,13,21,255)	surface.DrawRect(ScrW()/2 - 248,ScrH()-90,500*(act_bar/100),16)	surface.SetDrawColor(255,255,255,255)	surface.SetTexture(surface.GetTextureID("gui/action_bar"))	surface.DrawTexturedRect(ScrW()/2 - 256,ScrH()-96,512,32)	draw.SimpleText(act_type,"Dungeon",ScrW()/2,ScrH() - 80,Color(255,255,255,255),TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)endfunction Action_Read(act_data)	act_time = act_data:ReadShort()	act_type = act_data:ReadString()	End = act_data:ReadString()		InAction = true		timer.Create("Action",act_time/100,0,function()	act_bar = act_bar + 1			if (act_bar > 100) then			RunConsoleCommand(End)						InAction = false					act_bar = 0			act_type = "Nothing"			timer.Stop("Action")					end	end)		timer.Start("Action")	endusermessage.Hook("Action",Action_Read)if (plydata != nil) then	local maxhp = plydata.skills.hitpoints*10	local invper = plydata.iweight / plydata.icapacity * 100	local invtext = math.round(plydata.iweight,4) .. " / " .. plydata.icapacity	local stamina = self:GetNWInt("stamina")	local thirst = math.Round(self:GetNWFloat("thirst")*100)/100	local hunger = math.Round(self:GetNWFloat("hunger")*100)/100	local mana = self:GetNWInt("mana")	if (LocalPlayer():Alive() and LocalPlayer():GetActiveWeapon():IsValid() and LocalPlayer():GetActiveWeapon() != nil) then		draw.RoundedBox(2,8,ScrH()-82,204,20,Color(0,0,0,160))	draw.SimpleText(GetIName(LocalPlayer():GetActiveWeapon():GetClass()),"Fairy",110,ScrH()-72,Color(255,255,255,255),1,1)		end		DrawBar(2,ScrW()-210,ScrH()-80,200,16,"gui/stamina",160,stamina,stamina,"Stamina")	DrawBar(2,ScrW()-210,ScrH()-55,200,16,"gui/hunger",160,hunger,hunger,"Hunger")	DrawBar(2,ScrW()-210,ScrH()-30,200,16,"gui/thirst",160,thirst,thirst,"Thirst")	DrawBar(2,10,ScrH()-30,200,16,"gui/hp",160,hp/maxhp*100,hp,"Health")	DrawBar(2,10,ScrH()-55,200,16,"gui/weight",160,invper,invtext,"Weight")	local oxygen = self:GetNWInt("oxygen")	if (oxygen < 100) then		DrawBar(2,ScrW()/2-100,ScrH()-80,200,16,"gui/thirst",160,oxygen,oxygen,"Oxygen")	end	endendfunction MobHP()	for k,v in pairs(ents.FindInSphere(LocalPlayer():GetPos(),300)) do		if (v:GetNWBool("ismob") != nil and MobInfo[v:GetNWString("name")] != nil or Bosses[v:GetNWString("name")] != nil) then						local pos = (v:GetPos()+Vector(0,0,50)):ToScreen()			local health = 0					if (v:GetNWBool("isboss")) then				text = "Level " .. v:GetNWInt("cblvl") .. " " .. Bosses[v:GetNWString("name")].name			else				text = "Level " .. v:GetNWInt("cblvl") .. " " .. MobInfo[v:GetNWString("name")].name				health = MobInfo[v:GetNWString("name")].health + v:GetNWInt("level")				end						if (v:GetNWInt("health") > 0) then							local color = Color(255,255,255,255)								if (v:GetNWBool("isboss")) then					health = Bosses[v:GetNWString("name")].health					color = Color(255,0,0,255)				end								if (v:GetNWString("extra") == "elite") then					health = (MobInfo[v:GetNWString("name")].health + v:GetNWInt("level")) * 2					color = Color(225,225,20,255)				end									draw.DrawText(text,"Fairy",pos.x,pos.y-15,color,1)				draw.RoundedBox( 2, pos.x-50, pos.y, 100, 10, Color(255,0,0,200))				draw.RoundedBox( 2, pos.x-50, pos.y, 100 * (v:GetNWInt("health") / health), 10, Color(0,255,0,200))				if (!v:GetNWBool("isboss") and MobInfo[v:GetNWString("name")].aggressive) then draw.DrawText("-Aggressive-","Fairy",pos.x,pos.y-30,Color(255,128,32),1) end						end				end		endendhook.Add("HUDPaint","MobHP",MobHP)function PlyHP()	for k,v in pairs(ents.FindInSphere(LocalPlayer():GetPos(),500)) do		if (v:IsPlayer() and v != LocalPlayer()) then						local pos = (v:GetPos()+Vector(0,0,80)):ToScreen()						if (v:Health() > 0) then							draw.RoundedBox( 2, pos.x-50, pos.y, 100, 10, Color(255,0,0,200))				draw.RoundedBox( 2, pos.x-50, pos.y, 100 * (v:Health() / v:GetNWInt("hitpoints")), 10, Color(0,255,0,200))								if (v:GetNWBool("inclan") == false) then				draw.DrawText(v:Nick() .. " [" .. v:GetNWInt("cblevel") .. "]","Fairy",pos.x,pos.y-15,Color(255,255,255,255),1)								else									if (clans != nil and clans[v:GetNWString("clan")] != nil) then											local name = clans[v:GetNWString("clan")]["name"]									local color = string.Explode(",",clans[v:GetNWString("clan")]["color"])														draw.DrawText("- " .. name .. " -","Fairy",pos.x,pos.y-30,Color(color[1],color[2],color[3],255),1)						draw.DrawText(v:Nick() .. " [" .. v:GetNWInt("cblevel") .. "]","Fairy",pos.x,pos.y-15,Color(255,255,255,255),1)										end								end					end				end		endendhook.Add("HUDPaint","PlyHP",PlyHP)function DropText()	for k,v in pairs(ents.FindInSphere(LocalPlayer():GetPos(),300)) do		if (v:GetClass() == "da_drop") then						local pos = (v:GetPos()+Vector(0,0,30)):ToScreen()					local text = v:GetNWInt("amount") .. " " .. GetIName(v:GetNWString("item"))						draw.SimpleText(text,"FairyM",pos.x,pos.y,Color(255,255,255,255),1,1)		end		endendhook.Add("HUDPaint","DropText",DropText)function StandText()	for k,v in pairs(player.GetAll()) do		if (v:GetPos():Distance(LocalPlayer():GetPos()) < 400 and v:GetNWBool("stand") == true) then						local pos = (v:GetPos()+Vector(0,0,50)):ToScreen()			local text = v:GetNWString("title")						draw.RoundedBox(4, pos.x - 100, pos.y, 200, 20 + math.ceil(GetLength(text)/25) * 20, Color(0,0,0,200))						for i = 1,math.ceil(GetLength(text)/25) do							local x = string.sub(text,1+(i-1)*25,i*25)								draw.SimpleText(x,"Dungeon",pos.x,pos.y+10+(i-1)*20,Color(200,255,255,255),1,0)							end		end		endendhook.Add("HUDPaint","StandText",StandText)function DrawBar(b,x,y,w,h,texture,a,p,d,t)draw.RoundedBox(b,x-2,y-2,w+4,h+4,Color(0,0,0,a))draw.TexturedQuad( { texture = surface.GetTextureID(texture),color = Color(255, 255, 255, 255),x = x,y = y,w = w * p/100,h = h})draw.SimpleText(t,"DungeonS",x,y+h/2,Color(255,255,255,255),0,TEXT_ALIGN_CENTER)draw.SimpleText(d,"DungeonS",x+w,y+h/2,Color(255,255,255,255),2,TEXT_ALIGN_CENTER)endlocal Damages = {}function DamageData(data)	local dmg = {}	dmg.pos = data:ReadEntity():GetPos()	dmg.damage = data:ReadShort()	dmg.color = data:ReadString()	table.insert(Damages,dmg)endusermessage.Hook("damage",DamageData)function DamageIndicator()	for k,v in pairs(Damages) do			if (v.alpha == nil) then v.alpha = 255 end			v.alpha = v.alpha - (255/5)*FrameTime()			local pos = v.pos + Vector(0,0,50 + (64 - v.alpha/4)) 		local spos = pos:ToScreen()				local acolor = string.Explode(",",v.color)		local color = Color(acolor[1],acolor[2],acolor[3],v.alpha)		local dmg = v.damage				if (v.alpha > 0) then			draw.SimpleText(dmg,"FairyL",spos.x,spos.y,color,0,1)				else					Damages[k] = nil				end		endendhook.Add("HUDPaint","DamageIndicator",DamageIndicator)local texts = {}function HudText( data )	text = data:ReadString()		local t = {}	t.text = text	t.alpha = 255		table.insert(texts,t)endusermessage.Hook( "hudtext", HudText)function HudTextShow()	local i = 1	local x = 0	for k,v in pairs(texts) do			if (x < 5) then				if (v.alpha > 0) then							v.alpha = v.alpha - (255/4)*FrameTime()				draw.SimpleText(v.text,"FairyM",ScrW()/2,ScrH() - 96 - i*20,Color(255,255,255,v.alpha),1,1)				x = x + 1						else							texts[k] = nil				x = x - 1						end						i = i + 1				end					end	endhook.Add("HUDPaint","HudTextShow",HudTextShow)function ShowHudEntity()	for k,v in pairs(ents.FindInSphere(LocalPlayer():GetPos(),300)) do	if (HudEntities[v:GetClass()] != nil) then					if (HudEntities[v:GetClass()].around == true) then							local textpos = (v:GetPos() + Vector(0,0,HudEntities[v:GetClass()].height)):ToScreen()							draw.DrawText("- " .. HudEntities[v:GetClass()].name .. " -","FairyL",textpos.x,textpos.y,Color(255,170,0,255),1)								if(v:GetNWString("name") != nil and v:GetNWString("name") != "") then								local textpos = (v:GetPos() + Vector(0,0,HudEntities[v:GetClass()].height)):ToScreen()							draw.DrawText(v:GetNWString("name"),"FairyM",textpos.x,textpos.y-20,Color(255,170,0,255),1)								end										end				end		end		target = LocalPlayer():GetEyeTrace().Entity		if (target != nil) then			if (target:IsValid() and HudEntities[target:GetClass()] != nil) then					if (HudEntities[target:GetClass()].around == false) then							if (target:GetPos():Distance(LocalPlayer():GetPos()) < 300) then								local textpos = (target:GetPos() + Vector(0,0,HudEntities[target:GetClass()].height)):ToScreen()								draw.DrawText(HudEntities[target:GetClass()].name,"FairyL",textpos.x,textpos.y,Color(255,150,0,255),1)									end						end				end		endendhook.Add("HUDPaint","ShowHudEntity",ShowHudEntity)function ScoreBoard()	if (SBShow) then		local i = 0		draw.RoundedBox(4,ScrW()/2 - 250 ,20,500,30,Color(0,0,0,200))		draw.SimpleText( GAMEMODE.Name, "KnightL", ScrW()/2 , 35, Color(255,255,255,255), 1, 1 )				draw.RoundedBox(4,ScrW()/2 - 350 ,60,200,20,Color(0,0,0,200))		draw.RoundedBox(4,ScrW()/2 - 140 ,60,100,20,Color(0,0,0,200))		draw.RoundedBox(4,ScrW()/2 - 30 ,60,100,20,Color(0,0,0,200))		draw.RoundedBox(4,ScrW()/2 + 80 ,60,200,20,Color(0,0,0,200))		draw.RoundedBox(4,ScrW()/2 + 290 ,60,60,20,Color(0,0,0,200))				draw.SimpleText( "Name", "Adventure", ScrW()/2 - 250 , 70, Color(255,255,255,255), 1, 1 )		draw.SimpleText( "Combat LvL", "Adventure", ScrW()/2 - 90 , 70, Color(255,255,255,255), 1, 1 )		draw.SimpleText( "Total LvL", "Adventure", ScrW()/2 + 20 , 70, Color(255,255,255,255), 1, 1 )		draw.SimpleText( "Clan", "Adventure", ScrW()/2 + 180 , 70, Color(255,255,255,255), 1, 1 )		draw.SimpleText( "Ping", "Adventure", ScrW()/2 + 320 , 70, Color(255,255,255,255), 1, 1 )				for k,v in pairs(player.GetAll()) do					draw.RoundedBox(10,ScrW()/2 - 350 ,90 + i,700,22,Color(0,0,0,200))			draw.SimpleText( v:Nick(), "AdventureS", ScrW()/2 - 250 , 90 + i + 11, Color(255,255,255,255), 1, 1 )			draw.SimpleText( v:GetNWInt("cblevel"), "Adventure", ScrW()/2 - 90 , 90 + i + 11, Color(255,255,255,255), 1, 1 )			draw.SimpleText( v:GetNWInt("totallevel"), "Adventure", ScrW()/2 + 20 , 90 + i + 11, Color(255,255,255,255), 1, 1 )						local clan = "None"						if (v:GetNWBool("inclan") and clans[v:GetNWString("clan")] != nil) then			clan = clans[v:GetNWString("clan")].name			end						draw.SimpleText( clan, "AdventureS", ScrW()/2 + 180 , 90 + i + 11, Color(255,255,255,255), 1, 1 )			draw.SimpleText( v:Ping(), "Adventure", ScrW()/2 + 320 , 90 + i + 11, Color(255,255,255,255), 1, 1 )			i = i + 30				end		end	endhook.Add("HUDDrawScoreBoard","ScoreBoard",ScoreBoard)function GM:ScoreboardShow()	SBShow = true	return falseendfunction GM:ScoreboardHide()	SBShow = false	return falseendfunction HudPrint(text)	local t = {}	t.text = text	t.alpha = 255	table.insert(texts,t)endlocal territory = {}function TerritoryData(data)	territory.name = data:ReadString()	local ttype = data:ReadShort()	if (ttype == 0) then territory.text = "gui/zone_peace" end	if (ttype == 1) then territory.text = "gui/zone_pvp" end	if (ttype == 2) then territory.text = "gui/zone_mob" end	territory.alpha = 255endusermessage.Hook("territory",TerritoryData)function TerritoryDraw()	if (territory.name != nil) then		surface.SetDrawColor(Color(255,255,255,255))		surface.SetTexture(surface.GetTextureID(territory.text))		surface.DrawTexturedRect(16,16,48,48)	end	if (territory.alpha != nil and territory.alpha > 0) then		if (territory.alpha - (255/3)*FrameTime() > 0) then		territory.alpha = territory.alpha - (255/3)*FrameTime()		else		territory.alpha = 0		end		surface.SetFont("ZendaXL")		surface.SetTextColor(255,255,255,territory.alpha)		surface.SetTextPos(ScrW()/2-surface.GetTextSize(territory.name)/2,ScrH()/2)		surface.DrawText(territory.name)		surface.SetDrawColor(Color(255,255,255,territory.alpha))		surface.SetTexture(surface.GetTextureID(territory.text))		surface.DrawTexturedRect(ScrW()/2 + surface.GetTextSize(territory.name)/2 + 8,ScrH()/2-24,96,96)			endendhook.Add("HUDPaint","TerritoryDraw",TerritoryDraw)