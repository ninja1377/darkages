function AdminMenu(data)local Menu = vgui.Create("DFrame")Menu:SetPos(ScrW() / 2-300,ScrH() / 2-250)Menu:SetSize(600, 500)Menu:SetTitle("Admin Menu")Menu:SetDraggable(true)Menu:ShowCloseButton(true)Menu:SetVisible(true)Menu:MakePopup()local PlayerList = vgui.Create("DListView",Menu)PlayerList:SetParent(Menu)PlayerList:SetPos(10, 40)PlayerList:SetSize(300, 440)PlayerList:SetMultiSelect(false)PlayerList:AddColumn("Name") -- Add columnPlayerList:AddColumn("SteamID") -- Add column for k,v in pairs(player.GetAll()) do    PlayerList:AddLine(v:Nick(),v:SteamID()) -- Add linesend	local KButton = vgui.Create( "DButton", Menu )	KButton:SetSize( 270, 25 )	KButton:SetPos( 320, 40 )	KButton:SetText( "Kick" )	KButton.DoClick = function()		if (PlayerList:GetSelectedLine() != nil) then					AdminKick(PlayerList:GetLine(PlayerList:GetSelectedLine()):GetValue(1),PlayerList:GetLine(PlayerList:GetSelectedLine()):GetValue(2))		else HudPrint("Choose a player") end	end		local BButton = vgui.Create( "DButton", Menu )	BButton:SetSize( 270, 25 )	BButton:SetPos( 320, 70 )	BButton:SetText( "Ban" )	BButton.DoClick = function()		if (PlayerList:GetSelectedLine() != nil) then					AdminBan(PlayerList:GetLine(PlayerList:GetSelectedLine()):GetValue(1),PlayerList:GetLine(PlayerList:GetSelectedLine()):GetValue(2))		else HudPrint("Choose a player") end	end		local AddAdmin = vgui.Create( "DButton", Menu )	AddAdmin:SetSize( 270, 25 )	AddAdmin:SetPos( 320, 100 )	AddAdmin:SetText( "Promote to Admin" )	AddAdmin.DoClick = function()		if (PlayerList:GetSelectedLine() != nil) then					RunConsoleCommand("AddAdmin",PlayerList:GetLine(PlayerList:GetSelectedLine()):GetValue(2))		else HudPrint("Choose a player") end	end		local RemoveAdmin = vgui.Create( "DButton", Menu )	RemoveAdmin:SetSize( 270, 25 )	RemoveAdmin:SetPos( 320, 130 )	RemoveAdmin:SetText( "Demote to Player" )	RemoveAdmin.DoClick = function()		if (PlayerList:GetSelectedLine() != nil) then					RunConsoleCommand("RemoveAdmin",PlayerList:GetLine(PlayerList:GetSelectedLine()):GetValue(2))		else HudPrint("Choose a player") end	end		local item = ""		local Items = vgui.Create( "DComboBox", Menu)	Items:SetPos(320,190)	Items:SetSize( 270, 25 )	for k,v in pairs(SortArrayABC(resources)) do		Items:AddChoice(GetIName(v))	end	function Items:OnSelect(index,value)			for k,v in pairs(resources) do			if (value == resources[k].name) then				item = k					end				end		end	Items:ChooseOptionID( 1 )		local Amount = vgui.Create("TextEntry", Menu)	Amount:SetMultiline(false)	Amount:SetSize(100,25) 	Amount:SetPos(490,160)		local GiveItem = vgui.Create( "DButton", Menu )	GiveItem:SetSize( 160, 25 )	GiveItem:SetPos( 320, 160 )	GiveItem:SetText( "Give Item" )	GiveItem.DoClick = function()		if (PlayerList:GetSelectedLine() != nil) then			RunConsoleCommand("AdminGiveRes",PlayerList:GetLine(PlayerList:GetSelectedLine()):GetValue(2),item,Amount:GetValue())		else HudPrint("Choose a player") end	end		local skill = ""		local PSkills = vgui.Create( "DComboBox", Menu)	PSkills:SetPos(320,250)	PSkills:SetSize( 270, 25 )	for k,v in pairs(Skills) do		PSkills:AddChoice(GetIName(v))	end	function PSkills:OnSelect(index,value)		for k,v in pairs(Skills) do			if (value == GetIName(v)) then				skill = v					end				end			end	PSkills:ChooseOptionID( 1 )		local Amount = vgui.Create("TextEntry", Menu)	Amount:SetMultiline(false)	Amount:SetSize(100,25) 	Amount:SetPos(490,220)		local GiveXP = vgui.Create( "DButton", Menu )	GiveXP:SetSize( 160, 25 )	GiveXP:SetPos( 320, 220 )	GiveXP:SetText( "Give XP" )	GiveXP.DoClick = function()		if (PlayerList:GetSelectedLine() != nil) then					RunConsoleCommand("AdminGiveXP",PlayerList:GetLine(PlayerList:GetSelectedLine()):GetValue(2),skill,Amount:GetValue())		else HudPrint("Choose a player") end	endendusermessage.Hook("adminmenu",AdminMenu)function AdminKick(name,steamid)local Menu = vgui.Create("DFrame")Menu:SetPos(ScrW() / 2-200,ScrH() / 2-80)Menu:SetSize(400, 160)Menu:SetTitle("Kicking : " .. name .. " - SteamID : " .. steamid)Menu:SetDraggable(true)Menu:ShowCloseButton(true)Menu:SetVisible(true)Menu:MakePopup()local KLabel = vgui.Create("DLabel", Menu)KLabel:SetPos(10,40)KLabel:SetFont("default")KLabel:SetText("Reason")KLabel:SizeToContents()local Reason = vgui.Create("TextEntry", Menu)Reason:SetMultiline(false)Reason:SetSize(380,20) Reason:SetPos(10,70)local KButton = vgui.Create( "DButton", Menu )KButton:SetSize( 100, 30 )KButton:SetPos( 10, 100 )KButton:SetText( "Kick" )KButton.DoClick = function()	RunConsoleCommand("AdminKick",steamid,Reason:GetValue())endendfunction AdminBan(name,steamid)local Menu = vgui.Create("DFrame")Menu:SetPos(ScrW() / 2-200,ScrH() / 2-110)Menu:SetSize(400, 220)Menu:SetTitle("Banning : " .. name .. " - SteamID : " .. steamid)Menu:SetDraggable(true)Menu:ShowCloseButton(true)Menu:SetVisible(true)Menu:MakePopup()local BLabel = vgui.Create("DLabel", Menu)BLabel:SetPos(10,40)BLabel:SetFont("default")BLabel:SetText("Reason")BLabel:SizeToContents()local Reason = vgui.Create("TextEntry", Menu)Reason:SetMultiline(false)Reason:SetSize(380,20) Reason:SetPos(10,80)local BLabel = vgui.Create("DLabel", Menu)BLabel:SetPos(10,110)BLabel:SetFont("default")BLabel:SetText("Time [MINUTES]")BLabel:SizeToContents()local Time = vgui.Create("TextEntry", Menu)Time:SetMultiline(false)Time:SetSize(100,20) Time:SetPos(10,140)local BButton = vgui.Create( "DButton", Menu )BButton:SetSize( 100, 30 )BButton:SetPos( 10, 170 )BButton:SetText( "Ban" )BButton.DoClick = function()	if(Time:GetValue() != nil) then		RunConsoleCommand("AdminBan",steamid,Reason:GetValue(),Time:GetValue())	endendendfunction AdminMessage(data)admin = data:ReadString()text = data:ReadString()chat.AddText(Color(255,200,0,255),"[" .. admin .. "]" .. text)endusermessage.Hook("adminmsg",AdminMessage)